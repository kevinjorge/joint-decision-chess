# play.html
{% extends "main/base.html" %}

{% load static %}

{% block title %}
Play
{% endblock %}

{% block style%}
<style>
    .homeblock {
        height: 5%;
    }

    .sidenav {
        height: 95%;
    }
    #iframe-container {
        position: relative;
        width: 100%; /* Set the initial width as a percentage */
    }
    #embedded-iframe {
        width: 100%; /* Make the iframe fill the container horizontally */
    }
</style>
{% endblock %}

{% block content %}
<div id="content", name="content", class="content">
    <div class="row justify-content-center" style="max-width: 100%;"> <!-- max width necessary for no horizontal scrolling -->
        <!-- Gicen side bar maybe columns should instead be 3 5 3  and side bar width is a column width-->
        <!-- 3 columns for chat and notes -->
        <!-- Consider if this col-6 should be present for all play views or just the main one-->
        <!-- That is we can embedd the game itself in here as it's own template maybe -->
        <div class="col-6">
            <div id="iframe-container">
                <iframe id="embedded-iframe" src="{% static 'main/html/game.html' %}" frameborder=0></iframe>
            </div>
            <script>
                // Initial height calculation
                window.addEventListener('load', function() {
                    var iframeContainer = document.getElementById('iframe-container');
                    var width = iframeContainer.offsetWidth;
                    document.getElementById('embedded-iframe').style.height = width + 'px';
                });
    
                // Calculate and set the height to match the width
                window.addEventListener('resize', function() {
                    var iframeContainer = document.getElementById('iframe-container');
                    var width = iframeContainer.offsetWidth;
                    document.getElementById('embedded-iframe').style.height = width + 'px';
                });
            </script>
        </div>
        <!-- 3 columns for move list buttons and command center-->
    </div>
</div>
{% endblock %}